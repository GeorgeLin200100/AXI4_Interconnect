采用crossbar模式实现？

---

### 1. **Security（安全机制）**
- **作用**：通过硬件级安全控制，防止非法访问敏感资源。

- **赛题要求中对安全机制的设计要求：**

  - 安全相关Master 只能访问安全相关Slave 组件，Slave 在接收到正确的传输请求之
    后进行正常读写反馈。
  - 非安全相关Master 只能访问非安全相关Slave 组件，Slave 在接收到正确的传输请
    求之后进行正常读写反馈。
  -  Slave0/1 接口如果接收到上层访问安全相关组件的传输，直接返回error response
  - Slave2 接口如果接收到上层访问非安全相关组件的传输，直接返回error response
  - !!! axi中security机制不包括比赛要求中：当模块内部出现一个点的永久/暂时故障的检测与排除

- **实现**：  

  Xilinx的AXI Interconnect IP核通过以下机制实现安全（Security）功能：

  **1. TrustZone安全从设备配置**

  - **安全从设备标记**：每个连接的从设备（Slave）可以配置为**安全模式**（Secure Slave）。在此模式下，仅允许**安全AXI访问**（Secure Access）。
  - **拦截非安全访问**：若从设备被标记为安全，任何来自主设备（Master）的**非安全访问请求**（Non-secure Access）将被AXI Interconnect拦截，并返回**DECERR响应**（Decode Error），拒绝事务传播到目标从设备。

  **2. AXI协议属性检查**

  - **Prot信号验证**：AXI协议中，`awprot[1]`（写通道）和`arprot[1]`（读通道）用于标识事务的安全属性：
    - **0**：非安全访问（Non-secure）
    - **1**：安全访问（Secure）
  - **安全策略执行**：AXI Interconnect会检查事务的`prot[1]`位。若目标从设备为安全模式，但事务标记为非安全，则直接拒绝并返回错误。

  **3. 错误处理**

  - **DECERR响应生成**：对于非法访问（如非安全访问安全从设备），AXI Interconnect生成标准的**AXI DECERR响应**（`bresp`或`rresp`为`0b11`），通知主设备访问被拒绝。
  - **事务阻断**：非法事务不会传播到目标从设备，避免安全漏洞。

  **配置与实现**

  - **Vivado IP配置**：在IP Integrator中，通过设置从设备的**SECURE参数**为`1`，将其标记为安全从设备。
  - **协议兼容性**：支持AXI4/AXI3协议，与ARM TrustZone架构兼容，适用于异构SoC中安全域与非安全域的隔离。
  - * arm trust zone: ARM TrustZone是基于硬件的安全功能，它通过对原有硬件架构进行修改，在处理器层次引入了两个不同权限的保护域——[安全世界](https://zhida.zhihu.com/search?content_id=110683169&content_type=Article&match_order=1&q=安全世界&zhida_source=entity)和[普通世界](https://zhida.zhihu.com/search?content_id=110683169&content_type=Article&match_order=1&q=普通世界&zhida_source=entity)，任何时刻处理器仅在其中的一个环境内运行。同时这两个世界完全是硬件隔离的，并具有不同的权限，正常世界中运行的应用程序或操作系统访问安全世界的资源受到严格的限制，反过来安全世界中运行的程序可以正常访问正常世界中的资源。

  问题：安全主设备发送的一定是安全访问的信号吗?  虽然AXI协议允许安全主设备发送非安全信号，但在实际安全关键系统中，**必须通过设计约束和验证手段**确保其仅发起安全访问，从而维持系统整体的安全隔离性。



---

### 2. **Outstanding（未完成事务支持）**
- **作用**：允许主设备在未收到前序事务响应时，继续发起新事务。该特性主要针对同一master对多个slave有访问任务的情况

- **赛题要求：**

  Outstanding 功能，每channel 至少8 transaction outstanding 能力

  如果分开实现读写队列，需要考虑连续8个读/8个写，各设置长度为8的队列。

- **实现**：  

  - **核心机制**：
    - **事务标识（Transaction ID）**：每个事务通过唯一的`AWID`（写）或`ARID`（读）标识，用于追踪未完成的请求。
    - **缓冲队列（FIFO）**：Interconnect为每个主设备或事务ID维护队列，暂存未完成的地址、数据和响应信息。
    - **流控握手（VALID/READY）**：通过`VALID`和`READY`信号动态控制事务的发送与接收，避免溢出。
  - **示例流程**：
    1. 主设备发起写事务（`AWID=1`, `AWADDR=0x1000`），Interconnect接受后存入写地址队列。
    2. 主设备继续发起读事务（`ARID=2`, `ARADDR=0x2000`），Interconnect接受后存入读地址队列。
    3. Interconnect根据地址解码将写事务路由到从设备A，读事务路由到从设备B。
    4. 从设备A处理完成后返回`BID=1`响应，从设备B返回`RID=2`数据，Interconnect通过ID匹配将响应传递给主设备。
  - **独立通道管理**：
    - **写通道**：AW（地址）、W（数据）、B（响应）独立运作。
    - **读通道**：AR（地址）、R（数据）独立运作。
    - **互不阻塞**：写事务和读事务可同时进行，Interconnect分别处理。
  - 问题：读和写可以并行进行吗？

- **目的**：  
  提升总线利用率，避免因等待响应而产生的空闲周期，尤其适用于高延迟外设（如DDR存储器）。

- **问题：**

  burst和outstanding的大小如何界定？有必要使每个master带宽最大化吗

---

### 3. **Out-of-Order（乱序响应）**
- **作用**：允许从设备以不同于请求顺序的次序返回响应。
- **实现**：  
  - **顺序返回（In-Order）**：
    - Interconnect强制按事务发起顺序返回响应。
    - 实现方式：维护事务队列，确保响应顺序与请求一致。
    - **优点**：主设备无需处理乱序逻辑，设计简单。
    - **缺点**：性能受限于最慢的从设备。
  - **乱序返回（Out-of-Order, OOO）**：
    - 允许响应按实际完成顺序返回。
    - 实现方式：通过事务ID匹配响应与请求。
    - **优点**：提高系统吞吐量，尤其适用于多从设备并行处理。
    - **缺点**：增加主设备和Interconnect的ID管理复杂度。
- **目的**：  
  减少阻塞时间，提升系统整体吞吐量，尤其适用于多主设备、多从设备的复杂互连场景。

---

### 问题
- 优先度完全参照master设备的优先级设定吗？是否会导致最高优先级的master阻塞其他所有的master的读写的情况？
